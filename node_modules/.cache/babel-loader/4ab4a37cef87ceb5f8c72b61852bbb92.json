{"ast":null,"code":"// [VexFlow](http://vexflow.com) - Copyright (c) Mohit Muthanna 2010.\n// Author Taehoon Moon 2014\nimport { Vex } from './vex';\nimport { StaveModifier } from './stavemodifier';\nimport { TextNote } from './textnote';\nexport class StaveText extends StaveModifier {\n  static get CATEGORY() {\n    return 'stavetext';\n  }\n\n  constructor(text, position, options) {\n    super();\n    this.setAttribute('type', 'StaveText');\n    this.setWidth(16);\n    this.text = text;\n    this.position = position;\n    this.options = {\n      shift_x: 0,\n      shift_y: 0,\n      justification: TextNote.Justification.CENTER\n    };\n    Vex.Merge(this.options, options);\n    this.font = {\n      family: 'times',\n      size: 16,\n      weight: 'normal'\n    };\n  }\n\n  getCategory() {\n    return StaveText.CATEGORY;\n  }\n\n  setStaveText(text) {\n    this.text = text;\n    return this;\n  }\n\n  setShiftX(x) {\n    this.shift_x = x;\n    return this;\n  }\n\n  setShiftY(y) {\n    this.shift_y = y;\n    return this;\n  }\n\n  setFont(font) {\n    Vex.Merge(this.font, font);\n  }\n\n  setText(text) {\n    this.text = text;\n  }\n\n  draw(stave) {\n    const ctx = stave.checkContext();\n    this.setRendered();\n    ctx.save();\n    ctx.lineWidth = 2;\n    ctx.setFont(this.font.family, this.font.size, this.font.weight);\n    const text_width = ctx.measureText('' + this.text).width;\n    let x;\n    let y;\n    const Position = StaveModifier.Position;\n    const Justification = TextNote.Justification;\n\n    switch (this.position) {\n      case Position.LEFT:\n      case Position.RIGHT:\n        y = (stave.getYForLine(0) + stave.getBottomLineY()) / 2 + this.options.shift_y;\n\n        if (this.position === Position.LEFT) {\n          x = stave.getX() - text_width - 24 + this.options.shift_x;\n        } else {\n          x = stave.getX() + stave.getWidth() + 24 + this.options.shift_x;\n        }\n\n        break;\n\n      case Position.ABOVE:\n      case Position.BELOW:\n        x = stave.getX() + this.options.shift_x;\n\n        if (this.options.justification === Justification.CENTER) {\n          x += stave.getWidth() / 2 - text_width / 2;\n        } else if (this.options.justification === Justification.RIGHT) {\n          x += stave.getWidth() - text_width;\n        }\n\n        if (this.position === Position.ABOVE) {\n          y = stave.getYForTopText(2) + this.options.shift_y;\n        } else {\n          y = stave.getYForBottomText(2) + this.options.shift_y;\n        }\n\n        break;\n\n      default:\n        throw new Vex.RERR('InvalidPosition', 'Value Must be in Modifier.Position.');\n    }\n\n    ctx.fillText('' + this.text, x, y + 4);\n    ctx.restore();\n    return this;\n  }\n\n}","map":{"version":3,"sources":["/Users/adamsarli/Coding/music-app/node_modules/vexflow/src/stavetext.js"],"names":["Vex","StaveModifier","TextNote","StaveText","CATEGORY","constructor","text","position","options","setAttribute","setWidth","shift_x","shift_y","justification","Justification","CENTER","Merge","font","family","size","weight","getCategory","setStaveText","setShiftX","x","setShiftY","y","setFont","setText","draw","stave","ctx","checkContext","setRendered","save","lineWidth","text_width","measureText","width","Position","LEFT","RIGHT","getYForLine","getBottomLineY","getX","getWidth","ABOVE","BELOW","getYForTopText","getYForBottomText","RERR","fillText","restore"],"mappings":"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","sourcesContent":["// [VexFlow](http://vexflow.com) - Copyright (c) Mohit Muthanna 2010.\n// Author Taehoon Moon 2014\n\nimport { Vex } from './vex';\nimport { StaveModifier } from './stavemodifier';\nimport { TextNote } from './textnote';\n\nexport class StaveText extends StaveModifier {\n  static get CATEGORY() { return 'stavetext'; }\n\n  constructor(text, position, options) {\n    super();\n    this.setAttribute('type', 'StaveText');\n\n    this.setWidth(16);\n    this.text = text;\n    this.position = position;\n    this.options = {\n      shift_x: 0,\n      shift_y: 0,\n      justification: TextNote.Justification.CENTER,\n    };\n    Vex.Merge(this.options, options);\n\n    this.font = {\n      family: 'times',\n      size: 16,\n      weight: 'normal',\n    };\n  }\n\n  getCategory() { return StaveText.CATEGORY; }\n  setStaveText(text) { this.text = text; return this; }\n  setShiftX(x) { this.shift_x = x; return this; }\n  setShiftY(y) { this.shift_y = y; return this; }\n\n  setFont(font) {\n    Vex.Merge(this.font, font);\n  }\n\n  setText(text) {\n    this.text = text;\n  }\n\n  draw(stave) {\n    const ctx = stave.checkContext();\n    this.setRendered();\n\n    ctx.save();\n    ctx.lineWidth = 2;\n    ctx.setFont(this.font.family, this.font.size, this.font.weight);\n    const text_width = ctx.measureText('' + this.text).width;\n\n    let x;\n    let y;\n    const Position = StaveModifier.Position;\n    const Justification = TextNote.Justification;\n    switch (this.position) {\n      case Position.LEFT:\n      case Position.RIGHT:\n        y = (stave.getYForLine(0) + stave.getBottomLineY()) / 2 + this.options.shift_y;\n        if (this.position === Position.LEFT) {\n          x = stave.getX() - text_width - 24 + this.options.shift_x;\n        } else {\n          x = stave.getX() + stave.getWidth() + 24 + this.options.shift_x;\n        }\n        break;\n      case Position.ABOVE:\n      case Position.BELOW:\n        x = stave.getX() + this.options.shift_x;\n        if (this.options.justification === Justification.CENTER) {\n          x += stave.getWidth() / 2 - text_width / 2;\n        } else if (this.options.justification === Justification.RIGHT) {\n          x += stave.getWidth() - text_width;\n        }\n\n        if (this.position === Position.ABOVE) {\n          y = stave.getYForTopText(2) + this.options.shift_y;\n        } else {\n          y = stave.getYForBottomText(2) + this.options.shift_y;\n        }\n        break;\n      default:\n        throw new Vex.RERR('InvalidPosition', 'Value Must be in Modifier.Position.');\n    }\n\n    ctx.fillText('' + this.text, x, y + 4);\n    ctx.restore();\n    return this;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}